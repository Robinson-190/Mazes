#include "stdio.h"
#include "stdlib.h"
#include "stdarg.h"
#include "math.h"
#include "ctype.h"
#include "string.h"

//Maze Generator on dCode.fr [online website], retrieved on 2024-09-12, 

#define OPEN 0
#define CLOSED 1

#define ROW 41
#define COL 41
#define N 0
#define E 1
#define S 2
#define W 3

void draw_maze(int nrows, int ncols, int maze[ROW][COL],int x,int y){
    
    char symbols[2];
    symbols[OPEN]=   ' ';
    symbols[CLOSED]= 'O';



    
    for(int k = 0;k<ROW+2;k++){
            printf("%c ",symbols[CLOSED]);
        }
        printf("\n");
        for(int i = 0;i<COL;i++){
            
            //printf("|%d|",i);
            printf("%c ",symbols[CLOSED]);
            for(int k = 0;k<ROW;k++){
                if(i==y && k==x){
                    printf("%c ",'P');
                }
                else if(k==ROW-1 && i==COL-1){
                    printf("G ");
                }
                else{

                    printf("%c ",symbols[maze[k][i]]);
                }
                
                //printf("%d",maze[i][k]);
            }
            printf("%c ",symbols[CLOSED]);
            printf("\n");

            

    }
    for(int k = 0;k<ROW+2;k++){
            printf("%c ",symbols[CLOSED]);
        }
        printf("\n");
}


void get_walls(int nrows, int ncols, int maze[ROW][COL], int *dirs,int x,int y)
{
    //North
    if(y==0){
        dirs[N]=CLOSED;
    }
    else{
        dirs[N]=maze[x][y-1];
    }

    //South
    if(y==nrows){
        dirs[S]=CLOSED;
    }
    else{
        dirs[S]=maze[x][y+1];
    }

    //East
    if(x==ncols){
        dirs[E]=CLOSED;
    }
    else{
        dirs[E]=maze[x+1][y];
    }

    //West
    if(x==0){
        dirs[W]=CLOSED;
    }
    else{
        dirs[W]=maze[x-1][y];
    }
    
}

int main(){
    
    /*
    int maze[ROW][COL]= {{1, 0, 1, 1, 1, 1, 0, 1, 1, 1 },
                         {1, 0, 1, 0, 1, 1, 1, 0, 1, 1 },
                         {1, 1, 1, 0, 1, 1, 0, 1, 0, 1 },
                         {0, 0, 0, 0, 1, 0, 0, 0, 0, 1 },
                         {1, 1, 1, 0, 1, 1, 1, 0, 1, 0 },
                         {1, 0, 1, 1, 1, 1, 0, 1, 0, 0 },
                         {1, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
                         {1, 0, 1, 1, 1, 1, 0, 1, 1, 1 },
                         {1, 1, 0, 0, 0, 0, 1, 0, 0, 1 }};*/

    int maze[ROW][COL]={{0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
                        {0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1},
                        {1,1,1,0,1,0,1,1,1,0,1,0,1,1,1,0,1,1,1,0,1,0,1,0,1,0,1,0,1,1,1,0,1,0,1,1,1,1,1,1,1},
                        {1,0,0,0,1,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,1},
                        {1,1,1,1,1,0,1,0,1,0,1,1,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,0,1},
                        {1,0,1,0,0,0,1,0,1,0,1,0,1,0,1,0,0,0,1,0,1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
                        {1,0,1,1,1,0,1,0,1,0,1,0,1,1,1,0,1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,0,1,1,1,0,1,1,1,0,1},
                        {1,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0,1,0,1,0,1,0,1,0,1},
                        {1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,0,1,1,1,0,1,1,1,0,1,0,1,0,1,0,1,0,1},
                        {1,0,0,0,1,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,1},
                        {1,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,1,1,1,0,1,1,1,0,1,0,1,1,1,1,1,1,1,0,1,0,1,0,1,0,1},
                        {1,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0,1},
                        {1,0,1,0,1,0,1,0,1,0,1,0,1,1,1,0,1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,0,1,0,1,1,1,0,1},
                        {1,0,1,0,0,0,1,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,1},
                        {1,1,1,1,1,0,1,0,1,0,1,1,1,0,1,1,1,0,1,1,1,1,1,0,1,1,1,0,1,1,1,0,1,0,1,0,1,0,1,1,1},
                        {1,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,1,0,1,0,1,0,1},
                        {1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1},
                        {1,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,1,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,1,0,1,0,1,0,1},
                        {1,0,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1,0,1,0,1,0,1,1,1,0,1,0,1,0,1,1,1,0,1,0,1},
                        {1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,1},
                        {1,1,1,0,1,0,1,0,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,0,1},
                        {1,0,0,0,1,0,1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,1},
                        {1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1,0,1,1,1,0,1,0,1,1,1,1,1,0,1},
                        {1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1},
                        {1,0,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,0,1,0,1,0,1,1,1,0,1,1,1,0,1,1,1,1,1,0,1,1,1},
                        {1,0,1,0,1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1},
                        {1,0,1,0,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,0,1,0,1,0,1,1,1,0,1,0,1,1,1,0,1,0,1},
                        {1,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0,1,0,1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,1},
                        {1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,0,1,0,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1},
                        {1,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,0,0,0,0,0,0,1,0,1,0,1},
                        {1,0,1,1,1,0,1,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,0,1,0,1,1,1,0,1,0,1,1,1,0,1},
                        {1,0,1,0,1,0,1,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,1,0,0,0,0,0,1},
                        {1,1,1,0,1,0,1,1,1,1,1,0,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1},
                        {1,0,1,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1},
                        {1,0,1,0,1,0,1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,0,1,0,1,0,1,1,1,1,1,0,1},
                        {1,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0,1,0,1},
                        {1,0,1,0,1,0,1,1,1,0,1,1,1,1,1,0,1,0,1,0,1,0,1,1,1,0,1,1,1,1,1,0,1,1,1,0,1,0,1,0,1},
                        {1,0,1,0,0,0,0,0,1,0,1,0,0,0,1,0,1,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1},
                        {1,1,1,1,1,0,1,1,1,0,1,0,1,1,1,0,1,0,1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1},
                        {1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0},
                        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0}};
    int x = 0;
    int y = 0;

    char player_char = 'P';

    char nssymbols[2];
    nssymbols[OPEN]=' ';
    nssymbols[CLOSED]='O';

    char ewsymbols[2];
    ewsymbols[OPEN]=' ';
    ewsymbols[CLOSED]='O';

    

    int goal[2]={ROW-1,COL-1};

    char player_input='d';

    while(player_input!='q')
    {
        printf("\n");
        draw_maze(ROW, COL,maze, x, y);
        
        if(x==goal[0] && y==goal[1])
        {
            printf("\n=========================\n          YOU WIN\n=========================\n");
            return 1;
        }

        int dirs[4]={0,0,0,0};

        get_walls(ROW, COL,maze,dirs, x, y);

        printf("\n  %c\n",nssymbols[dirs[N]]);
        //printf("  |\n");
        printf("%c P %c\t(%d,%d)\n",ewsymbols[dirs[W]],ewsymbols[dirs[E]],x,y);
        //printf("  |\n");
        printf("  %c\n\n",nssymbols[dirs[S]]);
        printf("Input next direction (N,S,E,W) or q to quit:");
        scanf("%c",&player_input);

        if(player_input=='n'||player_input=='N')
        {
            if(dirs[N]==OPEN)
            {
                y-=1;
            }
            else{
                printf("\nCannot proceed North");
            }
        }
        else if(player_input=='s'||player_input=='S')
        {
            if(dirs[S]==OPEN)
            {
                y+=1;
            }
            else{
                printf("\nCannot proceed South");
            }
        }

        else if(player_input=='e'||player_input=='E')
        {
            if(dirs[E]==OPEN)
            {
                x+=1;
            }
            else{
                printf("\nCannot proceed East");
            }
        }
        else if(player_input=='w'||player_input=='W')
        {
            if(dirs[W]==OPEN)
            {
                x-=1;
            }
            else{
                printf("\nCannot proceed West\n");
            }
        }

    }

    

    
    return 1;
    
}

